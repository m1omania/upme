# Анализ ресурсоемкости проекта UpMe

## Краткий ответ

**Нет, ИИ не требует ресурсов вашего сервера!** 

AI генерация происходит через **внешний API HuggingFace**, ваш сервер только отправляет запрос и ждет ответ. Реальные ресурсы сервера минимальны.

---

## Детальный анализ

### ✅ Что НЕ требует ресурсов сервера:

#### 1. **AI генерация писем** (HuggingFace API)
- **Где выполняется**: На серверах HuggingFace (внешний API)
- **Что делает ваш сервер**: 
  - Отправляет HTTP запрос с промптом
  - Ждет ответ (до 60 секунд)
  - Получает готовый текст
- **Ресурсы сервера**: Минимальные (только сетевой запрос)
- **CPU**: ~0% (только ожидание)
- **RAM**: ~5-10 MB (для обработки ответа)
- **Время**: 10-30 секунд (но это время ожидания, не нагрузка)

#### 2. **Запросы к HH.ru API**
- **Где выполняется**: На серверах HH.ru
- **Что делает ваш сервер**: HTTP запросы
- **Ресурсы**: Минимальные (сетевые запросы)
- **CPU**: ~0%
- **RAM**: ~5 MB

#### 3. **Frontend (React)**
- **После сборки**: Статические файлы (HTML, CSS, JS)
- **Ресурсы**: Только место на диске (~5-10 MB)
- **CPU/RAM**: 0% (отдается как статика)

---

### ⚠️ Что требует ресурсов сервера:

#### 1. **База данных SQLite** (основная нагрузка)
- **Что делает**: Хранит данные пользователей, вакансии, отклики
- **Ресурсы**:
  - **CPU**: Низкая-средняя (при множественных запросах)
  - **RAM**: ~10-50 MB (зависит от размера БД)
  - **Диск**: ~1-100 MB (зависит от количества данных)
- **Проблемы**:
  - SQLite может блокироваться при одновременных запросах
  - Не масштабируется на множество пользователей
  - Для продакшена лучше PostgreSQL

#### 2. **Расчет релевантности вакансий**
- **Что делает**: Сравнивает навыки, опыт, названия
- **Ресурсы**:
  - **CPU**: Низкая (простые вычисления)
  - **RAM**: ~5-10 MB
- **Время**: <100ms на расчет

#### 3. **Node.js процесс**
- **Базовые ресурсы**:
  - **RAM**: ~50-150 MB (Node.js + Express)
  - **CPU**: Минимальная (в покое)
- **При нагрузке**:
  - **RAM**: до 200-300 MB
  - **CPU**: 5-15% (при активных пользователях)

#### 4. **Логирование (Winston)**
- **Ресурсы**:
  - **Диск**: Растет со временем (нужна ротация)
  - **RAM**: ~5-10 MB
- **Рекомендация**: Настройте ротацию логов

---

## Реальная нагрузка на сервер

### Сценарий 1: Один пользователь генерирует письмо

```
1. Пользователь нажимает "Сгенерировать"
   → CPU: 1-2%
   → RAM: +10 MB
   → Время: 0.1s (отправка запроса)

2. Ожидание ответа от HuggingFace (10-30 секунд)
   → CPU: 0% (просто ждет)
   → RAM: +5 MB (буфер для ответа)
   → Время: 10-30s (но это ожидание, не нагрузка!)

3. Получение ответа и сохранение
   → CPU: 1-2%
   → RAM: +5 MB
   → Время: 0.1s
```

**Итого**: CPU ~2-4%, RAM ~20 MB, реальное время обработки ~0.2s (остальное - ожидание)

### Сценарий 2: 10 одновременных пользователей

```
- 10 запросов к AI одновременно
  → CPU: 5-10% (обработка запросов)
  → RAM: ~200 MB (10 × 20 MB)
  → Проблема: SQLite может блокироваться
```

### Сценарий 3: Высокая нагрузка (100+ пользователей)

```
- SQLite станет узким местом
- Множественные блокировки БД
- Рекомендация: Миграция на PostgreSQL
```

---

## Рекомендации по ресурсам

### Для старта (1-50 пользователей):

**Минимальные требования:**
- **CPU**: 1 ядро
- **RAM**: 512 MB - 1 GB
- **Диск**: 5 GB
- **Сеть**: Стандартная

**Обычный хостинг Jino с услугой поддержки веб-приложений** - **достаточно!**

### Для роста (50-500 пользователей):

**Рекомендуемые требования:**
- **CPU**: 2 ядра
- **RAM**: 2 GB
- **Диск**: 20 GB
- **База данных**: PostgreSQL (вместо SQLite)

**VPS или облачный сервис** (Railway, Render)

### Для масштабирования (500+ пользователей):

**Требования:**
- **CPU**: 4+ ядра
- **RAM**: 4+ GB
- **База данных**: PostgreSQL на отдельном сервере
- **Кеширование**: Redis (опционально)
- **CDN**: Для статики

---

## Что можно оптимизировать

### 1. База данных SQLite → PostgreSQL
- ✅ Устранит блокировки
- ✅ Лучшая производительность
- ✅ Поддержка множественных пользователей

### 2. Кеширование AI ответов
- ✅ Уже реализовано в коде
- ✅ Повторные запросы не идут к API
- ✅ Экономит время и деньги

### 3. Ротация логов
- ✅ Предотвратит переполнение диска
- ✅ Настройте через Winston или logrotate

### 4. Оптимизация запросов к HH.ru
- ✅ Уже есть кеширование вакансий
- ✅ Можно добавить более агрессивное кеширование

---

## Итоговый вывод

### Для вашего проекта:

1. **AI генерация** - НЕ требует ресурсов сервера (внешний API)
2. **Основная нагрузка** - SQLite база данных (легкая, но может блокироваться)
3. **Node.js процесс** - ~50-200 MB RAM, минимальный CPU
4. **Frontend** - статика, 0% ресурсов

### Рекомендация для Jino:

**Обычный хостинг Jino + услуга поддержки веб-приложений (72₽/мес) - ДОСТАТОЧНО для старта!**

**Ограничения могут быть:**
- ⚠️ Время выполнения скрипта (обычно 30-60 секунд) - достаточно для AI запросов
- ⚠️ CPU лимиты - обычно достаточно для вашей нагрузки
- ⚠️ RAM лимиты - обычно 256-512 MB, достаточно для Node.js

**Если возникнут проблемы:**
- Миграция на PostgreSQL (если доступна)
- Оптимизация кеширования
- Переход на VPS при росте пользователей

---

## Мониторинг ресурсов

### Как проверить использование:

```bash
# На сервере (если есть SSH)
top                    # CPU и RAM
free -h                # RAM
df -h                  # Диск
pm2 monit              # Мониторинг Node.js процесса
```

### В коде (логирование):

Уже есть логирование через Winston:
- `backend/logs/combined.log` - все логи
- `backend/logs/error.log` - только ошибки

---

## Заключение

**Ваш проект очень легковесный!**

- AI работает на внешних серверах
- Основная нагрузка - простая база данных
- Node.js процесс минимальный
- Frontend - статика

**Обычный хостинг Jino с поддержкой Node.js - отличный выбор для старта!**

При росте пользователей можно легко мигрировать на VPS или облачный сервис.

